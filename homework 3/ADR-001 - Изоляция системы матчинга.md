# ADR-001 - Изоляция системы матчинга

**[STATUS]** **ACCEPTED**

## Контекст

В новом требовании **[US-300]** указано, что алгоритм матчинга
состоит из набора заранее известных шагов, реализованных на стороне,
и наша цель использовать эти шаги в правильном порядке.

Предыдущее требование **[US-060]** больше не валидно, поэтому
рандомный матчинг не подходит.

Также, одно из требований - низкий TTM, а из этого следуют
высокие показатели Modifiability и Deployability.

Как итог, требования к системе и сама система усложнились.

Прошлое решение, в котором система матчинга интегрируется
прямо в сервис создания заказов клиентами, более не является жизнеспособным.

## Решение

Выносим систему матчинга в отдельный изолированный сервис.

Архитектурный стиль сервиса - пайплайн, потому что такая реализация
максимально подходит требованиям бизнеса.

## Последствия

Плюсы такого решения:

- Более чистая и логичная архитектура, чем интеграция матчинга в другую систему.
- Позволяет сохранить низкий TTM за счёт изолированности системы.
- Выше Modifiability, а также более простая выкатка изменений в рамках одного сервиса.
- Выше Reliability и Scalability.

Минусы:

- Усложняется деплой всей системы за счёт дополнительного сервиса.
- Рост расходов на поддержку с точки зрения разработки и инфраструктуры.

## Альтернативы

Интеграция системы матчинга в систему с клиентами:

- Клиент "сам" выбирает воркера - удобно, когда матчинг очень простой.
- Подходит для монолита, но не подходит для распределённой структуры как у нас.
